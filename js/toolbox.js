var toolbox={state:{},initState:function(){try{toolbox.state={buttons:[["QueryBtn","select.png",()=>{toolbox.showPanel("query")},""+Lang.toolbox.query],["LayersBtn","layers.png",()=>{toolbox.showPanel("layers")},""+Lang.toolbox.layers],["AnalysisBtn","analysis.png",()=>{toolbox.showPanel("analysis")},""+Lang.toolbox.analysisTools],["NavigateBtn","navigate.png",()=>{toolbox.showPanel("navigate")},""+Lang.toolbox.navigationTools],["SearchBtn","search.png",()=>{toolbox.showPanel("search")},""+Lang.toolbox.search],["SettingsBtn","settings.png",()=>{toolbox.showPanel("settings")},""+Lang.toolbox.settings]],panels:{query:{div:"queryPanelDiv",func:()=>{analysis.startQuery()},closeFunc:()=>{analysis.stopQuery()},maxHeight:450},layers:{div:"layersPanelDiv",func:()=>{projectTree.show()},closeFunc:()=>{projectTree.closeTool()},resizeFunc:height=>{projectTree.resize(height)},maxHeight:1e3},analysis:{div:"analysisPanelDiv",func:()=>{},closeFunc:()=>{analysis.closeAnalysisTool()},maxHeight:400},navigate:{div:"navigatePanelDiv",func:()=>{navigate.show()},closeFunc:()=>{navigate.closeNavigateTool()},maxHeight:400},search:{div:"searchPanelDiv",func:()=>{},closeFunc:()=>{},maxHeight:120},settings:{div:"settingsPanelDiv",func:()=>{settings.show()},closeFunc:()=>{},resizeFunc:height=>{settings.resize(height)},maxHeight:1e3}},lastPanel:"",continerOpened:!1,selectedButton:null,searchToolLoaded:!1,last:null}}catch(err){application.errorHandling(err.message,0)}},init:function(){try{toolbox.initState(),toolbox.render(),toolbox.closeAllTools()}catch(err){application.errorHandling(err.message,0)}},render:function(){try{$("body").append(` 
            <div id="layersPanelDiv" class="panel  boxShadowLarge" style="display:none"> </div>
            <div id="queryPanelDiv" class="panel  boxShadowLarge" style="display:none">    </div>
            <div id="analysisPanelDiv" class="panel boxShadowLarge" style="display:none">    </div>
            <div id="navigatePanelDiv" class="panel boxShadowLarge" style="display:none">    </div>
            <div id="searchPanelDiv" class="panel panelSmall boxShadowLarge" style="display:none">    </div>
            <div id="settingsPanelDiv" class="panel boxShadowLarge" style="display:none"> </div>
        `),$.each(this.state.buttons,function(key,value){var iconNormal="./images/toolboxIcons/"+value[1],key=(key=`<div class='toolbox-button' onclick='toolbox.selectTool(${key},false); ' id='${value[0]}' title='${value[3]}'>`)+`<img class='toolbox-icon' src='${iconNormal}' />`+"</div>";$("#toolbox").append(key)});var loggeIcon=$(`<div id="errorCounter" class='toolboxErrorCounter link s9inv' onclick="application.showErrorLog()" title="${Lang.toolbox.logger}" style="display:none" ></div>`);$("#toolbox").append(loggeIcon)}catch(err){application.errorHandling(err.message,0)}},selectTool:function(key,forceOn){try{var imageURL,id=this.state.buttons[key][0];forceOn&&id==toolbox.state.selectedButton||(this.closeAllTools(),id!=toolbox.state.selectedButton&&((imageURL=$("#"+id).children("img").attr("src")).indexOf(!1)&&(imageURL=imageURL.replace(".png","_h.png"),$("#"+id).children("img").attr("src",imageURL)),toolbox.state.selectedButton=id,this.state.buttons[key][2]()))}catch(err){application.errorHandling(err.message,0)}},closeAllTools:function(){try{$.each(toolbox.state.buttons,function(key,value){id=toolbox.state.buttons[key][0];key=(key=$("#"+id).children("img").attr("src")).replace("_h.png",".png");$("#"+id).children("img").attr("src",key)}),toolbox.state.selectedButton=null,$.each(toolbox.state.panels,function(key,value){$("#"+value.div).hide(),$("#"+value.div).css("opacity","0")}),""!=toolbox.state.lastPanel&&toolbox.state.panels[toolbox.state.lastPanel].closeFunc(),toolbox.state.lastPanel=""}catch(err){application.errorHandling(err.message,0)}},showPanel:function(panel){try{this.state.lastPanel=panel;var height=Math.min(this.state.panels[panel].maxHeight,$(window).height()-50);$("#"+this.state.panels[panel].div).height(height),$("#"+this.state.panels[panel].div).show(),$("#"+this.state.panels[panel].div).css("opacity","1"),this.state.panels[panel].func()}catch(err){application.errorHandling(err.message,0)}},resizePanel:function(){try{var height;""!=this.state.lastPanel&&(height=Math.min(this.state.panels[this.state.lastPanel].maxHeight,$(window).height()-50),$("#"+this.state.panels[this.state.lastPanel].div).height(height),null!=toolbox.state.panels[toolbox.state.lastPanel].resizeFunc)&&toolbox.state.panels[toolbox.state.lastPanel].resizeFunc(height)}catch(err){application.errorHandling(err.message,0)}},openContainer:function(url,toolName,x,y){try{this.state.continerOpened=!0}catch(err){application.errorHandling(err.message,0)}},showLoggerCount:function(count){try{0<count?($("#errorCounter").show(),$("#errorCounter").text(Math.min(99,count))):$("#errorCounter").hide()}catch(err){}},dummy:null};